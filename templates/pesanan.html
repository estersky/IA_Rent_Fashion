<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IA Rent Fashion - Pesanan Saya</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        /* ===== FONTS ===== */
        @import url("https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap");
        @import url("https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&display=swap");
        @import url("https://fonts.googleapis.com/css2?family=Sora:wght@400;600;700&display=swap");

        /* ===== ROOT VARIABLES (Tema Utama) ===== */
        :root {
            --primary: #f85a87ff;
            --primary-dark: #fb97b3ff;
            --secondary: #ff9db9;
            --dark: #1a1a2e;
            --light-bg: #fafafa;
            --border-radius: 20px;
        }

        /* ===== GLOBAL & BODY STYLING ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Sora", sans-serif;
            background-color: var(--light-bg);
            padding-top: 100px;
            position: relative;
            overflow-x: hidden;
        }

        /* Background Effects */
        .background-effects {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
            overflow: hidden;
        }

        .background-effects::before {
            content: "ðŸŒ¸";
            position: absolute;
            font-size: 120px;
            opacity: 0.05;
            top: 20%;
            left: 5%;
            animation: float 8s ease-in-out infinite;
        }

        .background-effects::after {
            content: "ðŸ’–";
            position: absolute;
            font-size: 100px;
            opacity: 0.05;
            top: 60%;
            right: 5%;
            animation: float 10s ease-in-out infinite reverse;
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0px) rotate(0deg);
            }
            50% {
                transform: translateY(-20px) rotate(10deg);
            }
        }

        /* ===== TYPOGRAPHY ===== */
        h1, h2, h3, h4, h5, h6, .section-title, .page-title {
            font-family: "Outfit", sans-serif;
            font-weight: 800;
            color: var(--dark);
        }

        .page-title {
            font-size: 3rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
            text-shadow: 0 0 30px rgba(248, 90, 135, 0.2);
        }

        .decorative-line {
            width: 80px;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            margin: 1rem auto;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(248, 90, 135, 0.3);
        }

        /* ===== NAVBAR ===== */
        .navbar {
            background: rgba(255, 255, 255, 0.95) !important;
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(248, 90, 135, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            padding: 0.8rem 0 !important;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .navbar-brand img {
            transition: all 0.3s ease;
            filter: drop-shadow(0 5px 15px rgba(102, 126, 234, 0.1));
        }

        .navbar-brand img:hover {
            transform: scale(1.05);
        }

        .navbar-nav .nav-link {
            font-weight: 600;
            font-size: 0.9rem;
            color: var(--dark) !important;
            position: relative;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            padding: 0.5rem 0 !important;
        }

        .navbar-nav .nav-link::after {
            content: "";
            position: absolute;
            width: 0;
            height: 3px;
            bottom: -8px;
            left: 0;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            transition: width 0.3s ease;
            border-radius: 2px;
        }

        .navbar-nav .nav-link:hover::after {
            width: 100%;
        }

        .navbar-nav .nav-link.active {
            color: var(--primary) !important;
        }

        .navbar-nav .nav-link.active::after {
            width: 100%;
        }

        /* ===== ORDER PAGE STYLING ===== */
        .order-card {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: 0 5px 20px rgba(248, 90, 135, 0.1);
            transition: all 0.3s ease;
            border-top: 3px solid var(--primary);
            margin-bottom: 2rem;
            overflow: hidden;
        }

        .order-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(248, 90, 135, 0.15);
        }

        .order-header {
            background: linear-gradient(135deg, rgba(248, 90, 135, 0.05), rgba(255, 157, 185, 0.05));
            padding: 1.5rem;
            border-bottom: 1px solid rgba(248, 90, 135, 0.1);
        }

        .order-body {
            padding: 1.5rem;
        }

        .order-product {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem 0;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .order-product:last-child {
            border-bottom: none;
        }

        .product-image {
            width: 80px;
            height: 80px;
            border-radius: 12px;
            object-fit: cover;
            border: 2px solid rgba(248, 90, 135, 0.1);
        }

        .order-footer {
            background: #f8f9fa;
            padding: 1.5rem;
            border-top: 1px solid rgba(0, 0, 0, 0.05);
        }

        /* Status Badges - UKURAN LEBIH KECIL */
        .status-badge {
            padding: 0.3rem 0.8rem;
            border-radius: 50px;
            font-weight: 600;
            font-size: 0.75rem; /* Diperkecil dari 0.85rem */
        }

        .status-pending {
            background: rgba(255, 193, 7, 0.1);
            color: #ffc107;
            border: 1px solid rgba(255, 193, 7, 0.2);
        }

        .status-confirmed {
            background: rgba(40, 167, 69, 0.1);
            color: #28a745;
            border: 1px solid rgba(40, 167, 69, 0.2);
        }

        .status-completed {
            background: rgba(108, 117, 125, 0.1);
            color: #6c757d;
            border: 1px solid rgba(108, 117, 125, 0.2);
        }

        .status-cancelled {
            background: rgba(220, 53, 69, 0.1);
            color: #dc3545;
            border: 1px solid rgba(220, 53, 69, 0.2);
        }

        /* Filter Section */
        .filter-section {
            background: white;
            border-radius: var(--border-radius);
            padding: 1.5rem;
            box-shadow: 0 5px 20px rgba(248, 90, 135, 0.1);
            margin-bottom: 2rem;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            color: #6c757d;
        }

        .empty-state i {
            font-size: 4rem;
            color: #dee2e6;
            margin-bottom: 1rem;
        }

        /* Action Buttons */
        .btn-pink {
            background: linear-gradient(135deg, #f85a87, #ff9db9) !important;
            color: white !important;
            border: none !important;
            font-weight: 700 !important;
            padding: 0.75rem 1.5rem !important;
            border-radius: 50px !important;
            box-shadow: 0 8px 25px rgba(248, 90, 135, 0.3) !important;
            transition: all 0.3s ease !important;
        }

        .btn-pink:hover {
            transform: translateY(-2px) !important;
            box-shadow: 0 12px 30px rgba(248, 90, 135, 0.4) !important;
            color: white !important;
        }

        .btn-outline-pink {
            background: white !important;
            color: #f85a87 !important;
            border: 2px solid #f85a87 !important;
            font-weight: 600 !important;
            padding: 0.75rem 1.5rem !important;
            border-radius: 50px !important;
            transition: all 0.3s ease !important;
        }

        .btn-outline-pink:hover {
            background: #f85a87 !important;
            color: white !important;
            transform: translateY(-2px) !important;
        }

        /* Modal Styling */
        .modal-content {
            border-radius: var(--border-radius);
            border: none;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        }

        .modal-header {
            border-bottom: 1px solid rgba(248, 90, 135, 0.1);
            background: linear-gradient(135deg, rgba(248, 90, 135, 0.05), rgba(255, 157, 185, 0.05));
        }

        /* Responsive */
        @media (max-width: 768px) {
            .page-title {
                font-size: 2.2rem;
            }
            
            .order-product {
                flex-direction: column;
                text-align: center;
            }
            
            .product-image {
                width: 120px;
                height: 120px;
            }
            
            .status-badge {
                font-size: 0.7rem; /* Lebih kecil di mobile */
                padding: 0.25rem 0.6rem;
            }
        }
    </style>
</head>
<body>
    <!-- Background Effects -->
    <div class="background-effects"></div>

    <!-- HEADER -->
    <header id="header" class="site-header">
      <nav id="header-nav" class="navbar navbar-expand-lg py-3 border-bottom bg-white shadow-sm fixed-top">
        <div class="container">
          <!-- LOGO -->
          <a class="navbar-brand" href="{{ url_for('beranda') }}">
            <img src="{{ url_for('static', filename='images/main-logo.png') }}" alt="IA Rent Fashion Logo"
              class="logo" style="height:90px; width:auto; object-fit:contain;">
          </a>

          <!-- TOGGLER -->
          <button class="navbar-toggler d-flex d-lg-none order-3 p-2" type="button" data-bs-toggle="offcanvas"
            data-bs-target="#bdNavbar" aria-controls="bdNavbar" aria-expanded="false" aria-label="Toggle navigation">
            <svg class="navbar-icon" width="22" height="22" fill="currentColor">
              <use xlink:href="#navbar-icon"></use>
            </svg>
          </button>

          <!-- OFFCANVAS MENU -->
          <div class="offcanvas offcanvas-end" tabindex="-1" id="bdNavbar">
            <div class="offcanvas-header">
              <h5 class="offcanvas-title fw-semibold">Menu</h5>
              <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>

            <div class="offcanvas-body d-flex justify-content-between align-items-center">
              <!-- MENU -->
              <ul class="navbar-nav mx-auto text-uppercase fw-semibold">
                <li class="nav-item"><a class="nav-link me-4" href="{{ url_for('beranda') }}">Beranda</a></li>
                <li class="nav-item dropdown">
                  <a class="nav-link me-4 dropdown-toggle" data-bs-toggle="dropdown" href="{{ url_for('koleksi') }}" role="button"
                    aria-expanded="false">Koleksi</a>
                  <ul class="dropdown-menu animate slide border">
                    <li><a href="{{ url_for('jas') }}">Jas</a></li>
                    <li><a href="{{ url_for('dress') }}">Dress</a></li>
                    <li><a href="{{ url_for('aksesoris') }}">Aksesori</a></li>
                    <li><a href="{{ url_for('kebaya') }}">Kebaya</a></li>
                    <li><a href="{{ url_for('footwear') }}">Footwear</a></li>
                  </ul>
                </li>
                <li class="nav-item"><a class="nav-link me-4" href="{{ url_for('inspirasi') }}">Inspirasi</a></li>
                <li class="nav-item"><a class="nav-link me-4" href="{{ url_for('contact') }}">Kontak</a></li>
                <li class="nav-item"><a class="nav-link me-4" href="{{ url_for('tentang') }}">Tentang</a></li>
                <li class="nav-item"><a class="nav-link me-4 active" href="{{ url_for('pesanan') }}">Pesanan Saya</a></li>
              </ul>

              <!-- USER ICONS -->
              <ul class="d-flex list-unstyled mb-0 align-items-center">
                <!-- Search -->
                <li class="ms-3">
                  <a href="#" class="text-dark search-button">
                    <svg width="22" height="22" fill="currentColor">
                      <use xlink:href="#search"></use>
                    </svg>
                  </a>
                </li>

                <!-- Wishlist -->
                <li class="ms-3 dropdown">
                  <a href="#" class="text-dark dropdown-toggle position-relative" data-bs-toggle="dropdown">
                    <svg width="22" height="22" fill="currentColor">
                      <use xlink:href="#heart"></use>
                    </svg>
                    <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-warning text-dark">2</span>
                  </a>
                  <div class="dropdown-menu p-3 shadow border-0 rounded-4 dropdown-menu-end">
                    <h5 class="fw-bold mb-3">Wishlist Anda</h5>
                    <ul class="list-group mb-3">
                      <li class="list-group-item bg-transparent d-flex justify-content-between lh-sm">
                        <div>
                          <h6 class="fw-semibold">Dress Brokat Elegan</h6>
                          <small>Warna pastel lembut</small>
                        </div>
                        <span class="text-primary">Rp 100.000/hari</span>
                      </li>
                      <li class="list-group-item bg-transparent d-flex justify-content-between lh-sm">
                        <div>
                          <h6 class="fw-semibold">Setelan Jas Slimfit</h6>
                          <small>Ukuran L</small>
                        </div>
                        <span class="text-primary">Rp 120.000/hari</span>
                      </li>
                    </ul>
                    <a href="#" class="btn btn-dark w-100 rounded-pill">Lihat Semua</a>
                  </div>
                </li>

                <!-- Cart -->
                <li class="ms-3 dropdown">
                  <a href="#" class="text-dark dropdown-toggle position-relative" data-bs-toggle="dropdown">
                    <svg width="22" height="22" fill="currentColor">
                      <use xlink:href="#cart"></use>
                    </svg>
                    <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-dark text-white">3</span>
                  </a>
                  <div class="dropdown-menu p-3 shadow border-0 rounded-4 dropdown-menu-end">
                    <h5 class="fw-bold mb-3">Keranjang Anda</h5>
                    <ul class="list-group mb-3">
                      <li class="list-group-item bg-transparent d-flex justify-content-between lh-sm">
                        <div>
                          <h6 class="fw-semibold">Kebaya Modern</h6>
                          <small>1 item</small>
                        </div>
                        <span class="text-primary">Rp 95.000</span>
                      </li>
                      <li class="list-group-item bg-transparent d-flex justify-content-between lh-sm">
                        <div>
                          <h6 class="fw-semibold">Gaun Merah</h6>
                          <small>1 item</small>
                        </div>
                        <span class="text-primary">Rp 110.000</span>
                      </li>
                    </ul>
                    <div class="d-grid gap-2">
                      <a href="#" class="btn btn-dark rounded-pill">Lihat Keranjang</a>
                      <a href="#" class="btn btn-primary rounded-pill">Checkout</a>
                    </div>
                  </div>
                </li>

                <!-- User Menu (Login/Profile) -->
                {% if g.user or session.get('user_id') %}
                  <!-- Jika User Sudah Login -->
                  <li class="ms-3 dropdown">
                    <a href="#" class="text-dark dropdown-toggle d-flex align-items-center" data-bs-toggle="dropdown" 
                       style="text-decoration: none; gap: 8px;">
                      <svg width="22" height="22" fill="currentColor">
                        <use xlink:href="#user"></use>
                      </svg>
                      <span class="d-none d-sm-inline fw-semibold" style="font-size: 0.9rem;">
                        {% if g.user %}
                          {{ g.user.name[:15] }}
                        {% else %}
                          {{ session.get('user_name', 'User')[:15] }}
                        {% endif %}
                      </span>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end shadow border-0 rounded-3">
                      <!-- Profile -->
                      <li>
                        <a class="dropdown-item d-flex align-items-center gap-2" href="{{ url_for('profile') }}">
                          <i class="bi bi-person-circle" style="font-size: 1.1rem; color: #e91e63;"></i>
                          <span>Profile Saya</span>
                        </a>
                      </li>
                      <!-- Pesanan -->
                      <li>
                        <a class="dropdown-item d-flex align-items-center gap-2" href="{{ url_for('pesanan') }}">
                          <i class="bi bi-bag-check" style="font-size: 1.1rem; color: #ff9800;"></i>
                          <span>Pesanan Saya</span>
                        </a>
                      </li>
                      <!-- Favorit -->
                      <li>
                        <a class="dropdown-item d-flex align-items-center gap-2" href="#">
                          <i class="bi bi-heart" style="font-size: 1.1rem; color: #f44336;"></i>
                          <span>Favorit Saya</span>
                        </a>
                      </li>
                      <li><hr class="dropdown-divider"></li>
                      <!-- Logout -->
                      <li>
                        <a class="dropdown-item d-flex align-items-center gap-2 text-danger" href="{{ url_for('logout') }}">
                          <i class="bi bi-box-arrow-right" style="font-size: 1.1rem;"></i>
                          <span>Logout</span>
                        </a>
                      </li>
                    </ul>
                  </li>
                {% else %}
                  <!-- Jika User Belum Login -->
                  <li class="ms-3 dropdown">
                    <a href="#" class="text-dark dropdown-toggle" data-bs-toggle="dropdown" style="text-decoration: none;">
                      <svg width="22" height="22" fill="currentColor">
                        <use xlink:href="#user"></use>
                      </svg>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end shadow border-0 rounded-3">
                      <li>
                        <a class="dropdown-item d-flex align-items-center gap-2" href="{{ url_for('login') }}">
                          <i class="bi bi-box-arrow-in-right" style="font-size: 1.1rem; color: #2196f3;"></i>
                          <span>Login</span>
                        </a>
                      </li>
                      <li>
                        <a class="dropdown-item d-flex align-items-center gap-2" href="{{ url_for('register') }}">
                          <i class="bi bi-person-plus" style="font-size: 1.1rem; color: #4caf50;"></i>
                          <span>Daftar</span>
                        </a>
                      </li>
                    </ul>
                  </li>
                {% endif %}
              </ul>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <!-- MAIN CONTENT -->
    <main>
        <section class="py-5">
            <div class="container">
                <!-- Header -->
                <div class="row mb-5">
                    <div class="col-12 text-center">
                        <h1 class="page-title">Pesanan Saya</h1>
                        <div class="decorative-line"></div>
                        <p class="hero-subtitle" style="font-size: 1.2rem; color: #666; max-width: 600px; margin: 0 auto;">
                            Kelola dan lacak semua pesanan penyewaan fashion Anda
                        </p>
                    </div>
                </div>

                <!-- Filter Section -->
                <div class="filter-section">
                    <div class="row align-items-center">
                        <div class="col-md-6">
                            <h5 class="fw-bold mb-3 mb-md-0">Filter Pesanan:</h5>
                        </div>
                        <div class="col-md-6">
                            <div class="d-flex flex-wrap gap-2 justify-content-md-end">
                                <button class="btn btn-outline-pink active" data-filter="all">Semua</button>
                                <button class="btn btn-outline-pink" data-filter="pending">Menunggu</button>
                                <button class="btn btn-outline-pink" data-filter="confirmed">Dikonfirmasi</button>
                                <button class="btn btn-outline-pink" data-filter="completed">Selesai</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Orders List -->
                <div id="ordersContainer">
                    <!-- Pesanan akan dimuat secara dinamis di sini -->
                </div>

                <!-- Empty State (akan muncul jika tidak ada pesanan) -->
                <div id="emptyState" class="empty-state" style="display: none;">
                    <i class="bi bi-bag-x"></i>
                    <h4 class="mb-3">Belum Ada Pesanan</h4>
                    <p class="mb-4">Anda belum melakukan pemesanan. Yuk, jelajahi koleksi fashion kami!</p>
                    <a href="{{ url_for('koleksi') }}" class="btn btn-pink">Jelajahi Koleksi</a>
                </div>
            </div>
        </section>
    </main>

    <!-- Modal Detail Pesanan -->
    <div class="modal fade" id="orderDetailModal" tabindex="-1" aria-labelledby="orderDetailModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="orderDetailModalLabel">Detail Pesanan</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="orderDetailContent">
                    <!-- Detail pesanan akan dimuat di sini -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-pink" data-bs-dismiss="modal">Tutup</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Review -->
    <div class="modal fade" id="reviewModal" tabindex="-1" aria-labelledby="reviewModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="reviewModalLabel">Beri Review</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="reviewForm">
                        <div class="mb-3">
                            <label class="form-label">Rating</label>
                            <div class="rating-stars">
                                <i class="bi bi-star" data-rating="1"></i>
                                <i class="bi bi-star" data-rating="2"></i>
                                <i class="bi bi-star" data-rating="3"></i>
                                <i class="bi bi-star" data-rating="4"></i>
                                <i class="bi bi-star" data-rating="5"></i>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Ulasan</label>
                            <textarea class="form-control" rows="4" placeholder="Bagikan pengalaman Anda..."></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-pink" data-bs-dismiss="modal">Batal</button>
                    <button type="button" class="btn btn-pink" onclick="submitReview()">Kirim Review</button>
                </div>
            </div>
        </div>
    </div>

    <!-- FOOTER -->
    <footer id="footer" class="bg-white border-top mt-5">
        <div class="container py-5">
            <div class="row gy-4">
                <div class="col-lg-3 col-sm-6">
                    <img src="{{ url_for('static', filename='images/main-logo.png') }}" alt="logo"
                        class="img-fluid mb-3" style="max-width: 200px;">
                    <p>Jl. Brigjend H. Hasan Basri, Pangeran, Kec. Banjarmasin Utara,<br>Kota Banjarmasin, Kalimantan Selatan 70123</p>
                    <ul class="d-flex list-unstyled gap-3 mt-3">
                        <li><a href="https://facebook.com" class="text-dark"><i class="bi bi-facebook fs-5"></i></a></li>
                        <li><a href="https://instagram.com" class="text-dark"><i class="bi bi-instagram fs-5"></i></a></li>
                        <li><a href="https://youtube.com" class="text-dark"><i class="bi bi-youtube fs-5"></i></a></li>
                    </ul>
                </div>

                <div class="col-lg-2 col-sm-6">
                    <h5 class="fw-bold mb-3">Quick Links</h5>
                    <ul class="list-unstyled">
                        <li><a href="{{ url_for('beranda') }}" class="text-dark text-decoration-none">Beranda</a></li>
                        <li><a href="{{ url_for('koleksi') }}" class="text-dark text-decoration-none">Koleksi</a></li>
                        <li><a href="{{ url_for('inspirasi') }}" class="text-dark text-decoration-none">Inspirasi</a></li>
                        <li><a href="{{ url_for('contact') }}" class="text-dark text-decoration-none">Kontak</a></li>
                        <li><a href="{{ url_for('tentang') }}" class="text-dark text-decoration-none">Tentang</a></li>
                        <li><a href="{{ url_for('review') }}" class="text-dark text-decoration-none">Review</a></li>
                    </ul>
                </div>

                <div class="col-lg-3 col-sm-6">
                    <h5 class="fw-bold mb-3">Help & Info</h5>
                    <ul class="list-unstyled">
                        <li><a href="#" class="text-dark text-decoration-none">Cek Pesanan</a></li>
                        <li><a href="#" class="text-dark text-decoration-none">Kebijakan Pengembalian</a></li>
                        <li><a href="#" class="text-dark text-decoration-none">Hubungi Kami</a></li>
                        <li><a href="#" class="text-dark text-decoration-none">FAQ</a></li>
                    </ul>
                </div>

                <div class="col-lg-4 col-sm-6">
                    <h5 class="fw-bold mb-3">Contact Us</h5>
                    <p>
                        Ada pertanyaan atau saran? <br>
                        <a href="mailto:iarentfashion@gmail.com" class="text-dark text-decoration-underline">iarentfashion@gmail.com</a>
                    </p>
                    <p>
                        Butuh bantuan cepat? Hubungi kami: <br>
                        <a href="https://wa.me/6281122233344" class="text-dark text-decoration-underline">+62 811-2223-3344</a>
                    </p>
                </div>
            </div>

            <div class="border-top mt-4 pt-3 d-flex justify-content-between align-items-center flex-wrap">
                <div class="d-flex align-items-center gap-3">
                    <p class="mb-0 small fw-semibold">Payment options:</p>
                    <img src="{{ url_for('static', filename='images/visa.jpg') }}" alt="Visa" width="40" height="25"
                        class="rounded shadow-sm">
                    <img src="{{ url_for('static', filename='images/mastercard.jpg') }}" alt="MasterCard" width="40" height="25"
                        class="rounded shadow-sm">
                    <img src="{{ url_for('static', filename='images/paypal.jpg') }}" alt="PayPal" width="40" height="25"
                        class="rounded shadow-sm">
                </div>
                <p class="mb-0 small text-secondary">Â© 2025 IA Rent Fashion. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Konstanta deposit percentage (harus sama dengan di halaman checkout)
        const DEPOSIT_PERCENTAGE = 0.25;

        // Fungsi untuk format Rupiah
        function formatRupiah(amount) {
            return new Intl.NumberFormat('id-ID', {
                style: 'currency',
                currency: 'IDR',
                minimumFractionDigits: 0
            }).format(amount);
        }

        // Fungsi untuk mendapatkan status badge
        function getStatusBadge(status) {
            const statusMap = {
                'pending': { text: 'Menunggu', class: 'status-pending' },
                'confirmed': { text: 'Dikonfirmasi', class: 'status-confirmed' },
                'completed': { text: 'Selesai', class: 'status-completed' },
                'cancelled': { text: 'Dibatalkan', class: 'status-cancelled' }
            };
            
            return statusMap[status] || { text: 'Tidak Diketahui', class: 'status-pending' };
        }

        // Fungsi untuk mendapatkan status deposit
        function getDepositStatusText(status) {
            const statusMap = {
                'pending': { text: '(Pending)', class: 'text-warning' },
                'paid': { text: '(Lunas)', class: 'text-success' },
                'refunded': { text: '(Dikembalikan)', class: 'text-success' }
            };
            
            return statusMap[status] || { text: '(Tidak Diketahui)', class: 'text-secondary' };
        }

        // Fungsi untuk mendapatkan tombol aksi berdasarkan status
        function getActionButtons(order) {
            let buttons = '';
            
            switch(order.status) {
                case 'pending':
                    buttons = `
                        <button class="btn btn-pink me-2" onclick="payDeposit('${order.orderId}')">Bayar Deposit</button>
                        <button class="btn btn-outline-pink" onclick="cancelOrder('${order.orderId}')">Batalkan</button>
                    `;
                    break;
                case 'confirmed':
                    buttons = `
                        <button class="btn btn-pink me-2" onclick="viewOrderDetail('${order.orderId}')">Lihat Detail</button>
                        <button class="btn btn-outline-pink" onclick="contactCS()">Hubungi CS</button>
                    `;
                    break;
                case 'completed':
                    buttons = `
                        <button class="btn btn-pink me-2" onclick="viewOrderDetail('${order.orderId}')">Lihat Detail</button>
                        <button class="btn btn-outline-pink" onclick="openReviewModal('${order.orderId}')">Beri Review</button>
                    `;
                    break;
                default:
                    buttons = `
                        <button class="btn btn-pink me-2" onclick="viewOrderDetail('${order.orderId}')">Lihat Detail</button>
                    `;
            }
            
            return buttons;
        }

        // Fungsi untuk menampilkan pesanan
        function renderOrders(ordersToRender = null) {
            const ordersContainer = document.getElementById('ordersContainer');
            const emptyState = document.getElementById('emptyState');
            
            // Ambil data pesanan dari localStorage
            let orders = ordersToRender || JSON.parse(localStorage.getItem('userOrders')) || [];
            
            console.log('Orders from localStorage:', orders); // Debug
            
            // Jika tidak ada pesanan, tampilkan empty state
            if (orders.length === 0) {
                emptyState.style.display = 'block';
                ordersContainer.style.display = 'none';
                return;
            }
            
            // Sembunyikan empty state dan tampilkan container pesanan
            emptyState.style.display = 'none';
            ordersContainer.style.display = 'block';
            
            // Render setiap pesanan
            ordersContainer.innerHTML = orders.map(order => {
                const statusInfo = getStatusBadge(order.status);
                const depositInfo = getDepositStatusText(order.depositStatus);
                const actionButtons = getActionButtons(order);
                
                // Format tanggal
                const orderDate = new Date(order.orderDate).toLocaleDateString('id-ID', {
                    day: 'numeric',
                    month: 'long',
                    year: 'numeric'
                });
                
                // Format periode sewa
                const startDate = new Date(order.startDate).toLocaleDateString('id-ID', {
                    day: 'numeric',
                    month: 'short',
                    year: 'numeric'
                });
                
                const endDate = new Date(order.endDate).toLocaleDateString('id-ID', {
                    day: 'numeric',
                    month: 'short',
                    year: 'numeric'
                });
                
                const days = Math.ceil((new Date(order.endDate) - new Date(order.startDate)) / (1000 * 60 * 60 * 24));
                
                return `
                    <div class="order-card" data-order-id="${order.orderId}" data-status="${order.status}">
                        <div class="order-header">
                            <div class="row align-items-center">
                                <div class="col-md-6">
                                    <h5 class="fw-bold mb-2">${order.orderId}</h5>
                                    <p class="text-muted mb-0">${orderDate}</p>
                                </div>
                                <div class="col-md-6 text-md-end">
                                    <span class="status-badge ${statusInfo.class}">${statusInfo.text}</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="order-body">
                            <div class="order-product">
                                <img src="${order.productDetails.image}" alt="${order.productDetails.name}" class="product-image">
                                <div class="flex-grow-1">
                                    <h6 class="fw-bold">${order.productDetails.name}</h6>
                                    <p class="text-muted mb-1">Ukuran: ${order.productDetails.size || '-'} â€¢ Warna: ${order.productDetails.color || '-'}</p>
                                    <p class="mb-1"><strong>Periode Sewa:</strong> ${startDate} - ${endDate} (${days} hari)</p>
                                    <p class="mb-0"><strong>Total Biaya:</strong> ${formatRupiah(order.biayaSewa)}</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="order-footer">
                            <div class="row align-items-center">
                                <div class="col-md-6">
                                    <p class="mb-2 mb-md-0"><strong>Deposit:</strong> ${formatRupiah(order.deposit)} <span class="${depositInfo.class}">${depositInfo.text}</span></p>
                                </div>
                                <div class="col-md-6 text-md-end">
                                    ${actionButtons}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Fungsi untuk memfilter pesanan
        function filterOrders(status) {
            const allOrders = JSON.parse(localStorage.getItem('userOrders')) || [];
            
            if (status === 'all') {
                renderOrders(allOrders);
            } else {
                const filteredOrders = allOrders.filter(order => order.status === status);
                renderOrders(filteredOrders);
            }
        }

        // Fungsi untuk melihat detail pesanan
        function viewOrderDetail(orderId) {
            const orders = JSON.parse(localStorage.getItem('userOrders')) || [];
            const order = orders.find(o => o.orderId === orderId);
            
            if (!order) {
                alert('Pesanan tidak ditemukan');
                return;
            }
            
            // Format tanggal
            const orderDate = new Date(order.orderDate).toLocaleDateString('id-ID', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
            
            const startDate = new Date(order.startDate).toLocaleDateString('id-ID', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            const endDate = new Date(order.endDate).toLocaleDateString('id-ID', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            const days = Math.ceil((new Date(order.endDate) - new Date(order.startDate)) / (1000 * 60 * 60 * 24));
            
            // Isi konten modal
            document.getElementById('orderDetailContent').innerHTML = `
                <div class="row">
                    <div class="col-md-6">
                        <h6>Informasi Pesanan</h6>
                        <p><strong>ID Pesanan:</strong> ${order.orderId}</p>
                        <p><strong>Tanggal Pesan:</strong> ${orderDate}</p>
                        <p><strong>Status:</strong> <span class="status-badge ${getStatusBadge(order.status).class}">${getStatusBadge(order.status).text}</span></p>
                    </div>
                    <div class="col-md-6">
                        <h6>Informasi Pelanggan</h6>
                        <p><strong>Nama:</strong> ${order.fullName}</p>
                        <p><strong>Email:</strong> ${order.email}</p>
                        <p><strong>Telepon:</strong> ${order.phone}</p>
                    </div>
                </div>
                
                <hr>
                
                <div class="row">
                    <div class="col-12">
                        <h6>Detail Produk</h6>
                        <div class="d-flex align-items-center mb-3">
                            <img src="${order.productDetails.image}" alt="${order.productDetails.name}" class="product-image me-3">
                            <div>
                                <h6 class="fw-bold">${order.productDetails.name}</h6>
                                <p class="mb-1">Ukuran: ${order.productDetails.size || '-'} â€¢ Warna: ${order.productDetails.color || '-'}</p>
                                <p class="mb-0">Kuantitas: ${order.quantity}</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <hr>
                
                <div class="row">
                    <div class="col-md-6">
                        <h6>Jadwal Sewa</h6>
                        <p><strong>Mulai:</strong> ${startDate}</p>
                        <p><strong>Selesai:</strong> ${endDate}</p>
                        <p><strong>Durasi:</strong> ${days} hari</p>
                    </div>
                    <div class="col-md-6">
                        <h6>Ringkasan Pembayaran</h6>
                        <div class="d-flex justify-content-between mb-2">
                            <span>Biaya Sewa (${days} hari):</span>
                            <span>${formatRupiah(order.biayaSewa)}</span>
                        </div>
                        <div class="d-flex justify-content-between mb-2">
                            <span>Deposit (25%):</span>
                            <span>${formatRupiah(order.deposit)}</span>
                        </div>
                        <hr>
                        <div class="d-flex justify-content-between fw-bold">
                            <span>Total Bayar Saat Ambil:</span>
                            <span>${formatRupiah(order.biayaSewa)}</span>
                        </div>
                    </div>
                </div>
                
                <hr>
                
                <div class="row">
                    <div class="col-12">
                        <h6>Lokasi Pengambilan</h6>
                        <p>${order.pickupLocation || 'Jl. Brigjend H. Hasan Basri, Pangeran, Banjarmasin'}</p>
                        <p class="text-muted small">Harap bawa KTP/SIM asli saat pengambilan barang.</p>
                    </div>
                </div>
            `;
            
            // Tampilkan modal
            const modal = new bootstrap.Modal(document.getElementById('orderDetailModal'));
            modal.show();
        }

        // Fungsi untuk membayar deposit
        function payDeposit(orderId) {
            alert(`Mengarahkan ke pembayaran deposit untuk pesanan ${orderId}`);
            // Di sini bisa diarahkan ke halaman pembayaran
        }

        // Fungsi untuk membatalkan pesanan
        function cancelOrder(orderId) {
            if (confirm('Apakah Anda yakin ingin membatalkan pesanan ini?')) {
                const orders = JSON.parse(localStorage.getItem('userOrders')) || [];
                const updatedOrders = orders.map(order => {
                    if (order.orderId === orderId) {
                        return { ...order, status: 'cancelled' };
                    }
                    return order;
                });
                
                localStorage.setItem('userOrders', JSON.stringify(updatedOrders));
                renderOrders(updatedOrders);
                alert('Pesanan berhasil dibatalkan');
            }
        }

        // Fungsi untuk menghubungi customer service
        function contactCS() {
            window.open('https://wa.me/6281122233344', '_blank');
        }

        // Fungsi untuk membuka modal review
        let currentOrderId = '';
        function openReviewModal(orderId) {
            currentOrderId = orderId;
            const modal = new bootstrap.Modal(document.getElementById('reviewModal'));
            modal.show();
        }

        // Fungsi untuk submit review
        function submitReview() {
            alert(`Review untuk pesanan ${currentOrderId} berhasil dikirim!`);
            const modal = bootstrap.Modal.getInstance(document.getElementById('reviewModal'));
            modal.hide();
        }

        // Cek apakah ada pesanan baru dari proses checkout
        function checkNewOrder() {
            const currentOrder = localStorage.getItem('currentOrder');
            const redirectToOrders = localStorage.getItem('redirectToOrders');
            
            if (currentOrder && redirectToOrders === 'true') {
                // Hapus flag redirect
                localStorage.removeItem('redirectToOrders');
                
                // Tampilkan pesan sukses
                const order = JSON.parse(currentOrder);
                alert(`Pesanan ${order.orderId} berhasil dibuat!`);
                
                // Refresh tampilan pesanan
                renderOrders();
            }
        }

        // Inisialisasi saat halaman dimuat
        document.addEventListener('DOMContentLoaded', function() {
            // Cek pesanan baru
            checkNewOrder();
            
            // Render pesanan
            renderOrders();
            
            // Filter functionality
            const filterButtons = document.querySelectorAll('.btn-outline-pink[data-filter]');
            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    
                    const filter = this.getAttribute('data-filter');
                    filterOrders(filter);
                });
            });
        });
    </script>
</body>
</html>